---
- name: Install fish shell
  package:
    name: fish
    state: present

- name: Install packages
  package:
    name: { { item } }
    state: present
  with_items:
    - nano
    - vim
    - gnome-tweaks
    - tilix
    - mpv
    - unzip
    - unrar
    - wl-clipboard
    - git
    - htop
    - imwheel
    - ripgrep
    - gnome-shell-extension-pomodoro
    - chromium
    - android-tools
    - youtube-dl
    - emacs
    - timew
    - syncthing
    - fzf
    - bat
    - glances
    - bmon
    - dnf-plugin-system-upgrade
    - gedit-plugins
    - jpegoptim
    - optipng
    - ImageMagick
    - seahorse-nautilus
    - nautilus-search-tool
    - nautilus-image-converter
    - vulkan-loader
    - vulkan-loader.i686

- name: Developer tools
  dnf:
    name: { { item } }
    state: present
  with_items:
    - awscli
    - azure-cli
    - google-cloud-sdk
    - httpie
    - ansible-lint
    - podman
    - nodejs

- name: Install power management tools
  package:
    name: { { item } }
    state: present
  with_items:
    - tlp
    - tlp-rdw
    - powertop
    - smartmontools
    - tuned
    - tuned-utils
    - thermald
    - tuned-profiles-realtime

- name: Install group packages
  package:
    name: { { item } }
    state: present
  with_items:
    - "@virtualization"
    - "@vagrant"

- name: Install libappindicator for indicator support
  package:
    name: { { item } }
    state: present
  with_items:
    - libappindicator
    - libappindicator-devel
    - libappindicator-gtk3
    - perl-Gtk2-AppIndicator
    - python2-appindicator

- name: Install codecs
  package:
    name: { { item } }
    state: present
  with_items:
    - gstreamer-plugins-base
    - gstreamer1-plugins-base
    - gstreamer-plugins-bad
    - gstreamer-plugins-ugly
    - gstreamer1-plugins-ugly
    - gstreamer-plugins-good-extras
    - gstreamer1-plugins-good-extras
    - gstreamer1-plugins-bad-freeworld
    - gstreamer-ffmpeg
    - ffmpeg
    - ffmpegthumbnailer

- name: Install themes and icon packs
  package:
    name: { { item } }
    state: present
  with_items:
    - papirus-icon-theme
    - f29-backgrounds-animated

- name: Install fonts
  package:
    name: { { item } }
    state: present
  with_items:
    - fira-code-fonts
    - fontconfig-enhanced-defaults
    - fontconfig-font-replacements

- name: Install croc for sending files
  command: "curl https://getcroc.schollz.com | bash"

- name: Install Google Chrome
  package:
    name: "https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm"
    state: present

- name: Remove LibreOffice
  package:
    name: libreoffice-core
    state: absent

- name: Remove unwanted packages
  package:
    name: { { item } }
    state: absent
  with_items:
    - evolution
    - simple-scan
    - totem
    - gnome-maps
    - gnome-online-miners
    - gnome-calendar
    - gnome-software
    - gnome-contacts
    - gnome-dictionary
    - gnome-user-share
    - yelp

- name: Ensure core GNOME packages are present
  package:
    name: { { item } }
    state: present
  with_items:
    - eog
    - evince
    - evolution-data-server
    - flatpak
    - gdm
    - gnome-keyring
    - gnome-menus
    - gnome-screenshot
    - gnome-shell
    - gnome-terminal
    - gnome-tweaks
    - nautilus
    - redhat-menus
